<div class="container">
<div class="head d-flex flex-column justify-content-center pl-2 pr-2 mt-5">
  <h2><%= @activity.name %></h2>
<div class="summary d-flex flex-row justify-space between">
  <div class="d-flex flex-start">
    <div class="p-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
      </svg>
      <%= @activity.avg_rating.round(2) %>
    </div>
    <div class="p-2 ">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-currency-euro" viewBox="0 0 16 16">
      <path d="M4 9.42h1.063C5.4 12.323 7.317 14 10.34 14c.622 0 1.167-.068 1.659-.185v-1.3c-.484.119-1.045.17-1.659.17-2.1 0-3.455-1.198-3.775-3.264h4.017v-.928H6.497v-.936c0-.11 0-.219.008-.329h4.078v-.927H6.618c.388-1.898 1.719-2.985 3.723-2.985.614 0 1.175.05 1.659.177V2.194A6.617 6.617 0 0 0 10.341 2c-2.928 0-4.82 1.569-5.244 4.3H4v.928h1.01v1.265H4v.928z"/>
      </svg>
      <%= @activity.price %>
    </div>
    <div class="p-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
      </svg>
      <%= @activity.user.first_name %>
    </div>
    <div class="p-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
      <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
      </svg>
      <%= @activity.address %>
    </div>
  </div>
  <div class="d-flex flex-end">
    <div class="p-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark" viewBox="0 0 16 16">
        <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
      </svg>
      Save this activity
    </div>
    <div class="p-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
        <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
      </svg>
      Share
    </div>
  </div>
</div>

<div class="container d-flex mb-2 mt-2 justify-content-between">
  <% @activity.photos.each do |photo| %>
    <div class="picture p-2">
      <%= cl_image_tag photo.key, height: 300, crop: :fill, class:"img-fluid"%>
    </div>
  <% end %>
</div>


<!-- <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <% @activity.photos.each_with_index do |photo, index| %>
    <li data-target="#carouselExampleIndicators" data-slide-to=index class="active"></li>
    <% end %>
  </ol>
  <div class="carousel-inner">
  <% @activity.photos.each_with_index do |photo, i| %>
    <div class="carousel-item <%= "active" if i == 0  %>">
      <%= cl_image_tag photo.key, height: 300, crop: :fill, class:"img-fluid"%>
    </div>
  <% end %>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div> -->


  <div class="container">
    <div class="row">
      <div class= "col-8">
        <div class="container">
          <p><%= @activity.description %></p>
          <p><%= @activity.address %></p>
          <p><%= @activity.price %></p>



          <%= link_to 'Home', root_path %> |
          <%= link_to "Back", :back %> |
          <%= link_to 'Book', new_activity_booking_path(@activity) %> |
          <%= link_to 'Add a Review', new_activity_review_path(@activity) %> |

          <% if current_user == @activity.user %>
            <%= link_to 'Edit', edit_activity_path(@activity) %> |
          <% end %>
          <% if current_user == @activity.user %>
            <%= link_to "Delete #{@activity.name}",
                  activity_path(@activity),
                  method: :delete,
                  data: { confirm: "Are you sure?" } %> |
          <% end %>

          <div class="list-group">
            <% @activity.reviews.each do |review| %>
              <li class="list-group-item">
                <small>
                  <% count = 0 %>
                    <% 5.times do %>
                      <% if review.rating > count %>
                        <i class="fas fa-star"></i>
                      <% else %>
                        <i class="far fa-star"></i>
                      <% end %>
                        <% count += 1 %>
                    <% end %>
                </small>
                  <p><%= review.content %></p>
                  <p><%= review.user.first_name %></p>
                  <% if current_user == review.user %>
                    <%= link_to 'Edit Review', edit_activity_review_path(@activity, review) %>
                  <% end %>
              </li>
            <% end %>
          </div>
        </div>

      </div>
      <div class="col-4">
        <div class="sticky-top" style="top: 100px">
        <%= simple_form_for [ @activity, @booking ] do |f| %>
          <%= f.input :start_date %>
          <%= f.input :end_date %>
          <%= f.submit "Submit booking", class: "btn btn-success" %>
        <% end %>
        </div>
      </div>
    </div>


  </div>
</div>
</div>


